version: 2

sources:
  - name: raw
    description: Raw data collected from CTA APIs and GTFS static data
    tables:
      - name: raw_train_arrivals
        description: Raw train arrival predictions collected from the CTA Train Tracker API
        columns:
          - name: run_number
            description: Train run number (unique identifier for a train trip)
          - name: route
            description: Train route (Red, Brn, P, etc.)
          - name: stop_id
            description: Stop ID (platform-level, more specific than station)
          - name: station_id
            description: Station ID (maps to CTA station)
          - name: station_name
            description: Human-readable station name
          - name: predicted_arrival
            description: Predicted arrival time at this stop
          - name: prediction_made_at
            description: Timestamp when the prediction was generated by CTA
          - name: is_delayed
            description: Whether CTA considers this train delayed
          - name: is_scheduled
            description: True if this prediction is schedule-based, not from real train position
          - name: collected_at
            description: Timestamp when this row was inserted by our collector

      - name: raw_bus_predictions
        description: Raw bus arrival predictions collected from the CTA Bus Tracker API
        columns:
          - name: vehicle_id
            description: Bus vehicle ID
          - name: route
            description: Bus route number
          - name: stop_id
            description: Bus stop ID
          - name: predicted_arrival
            description: Predicted arrival time at this stop
          - name: prediction_made_at
            description: Timestamp when the prediction was generated by CTA
          - name: is_delayed
            description: Whether CTA considers this bus delayed
          - name: collected_at
            description: Timestamp when this row was inserted by our collector

  - name: gtfs
    description: Static GTFS schedule data from CTA
    tables:
      - name: gtfs_stops
      - name: gtfs_routes
      - name: gtfs_trips
      - name: gtfs_stop_times
      - name: gtfs_calendar
